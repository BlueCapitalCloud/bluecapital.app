{"version":3,"sources":["webpack:///./src/components/AnexoDialog.vue","webpack:///src/components/AnexoDialog.vue","webpack:///./src/components/AnexoDialog.vue?7c56","webpack:///./src/components/AnexoDialog.vue?8df1"],"names":["staticClass","staticStyle","model","value","dialog","callback","_vm","expression","addUpload","attrs","arquivo","on","staticRenderFns","render","props","arquivos","type","default","idMovimentacao","data","loadingDownload","loading","methods","file","window","API","movimentacao","EventBus","key","downloadArquivo","errorMsg","component"],"mappings":"8QAA0M,W,MAA2BA,K,EAAwBC,QAAW,G,SAApC,O,YAA4D,kB,UAAC,C,MAAD,C,MAA5E,OAA/C,YAA3C,OAAuOC,IAAM,YAACC,YAAWC,GAAQC,MAAS,KAAgBC,MAAIF,GAAJ,OAAAE,EAAA,IAA7C,wBAA6DC,YAAW,CAAxE,cAAoG,MAAL,CAAYN,UAAY,KAAxB,4CAAiD,MAAjD,CAAmE,MAAC,SAAC,SAASK,SAAIE,GAAd,YAA2DR,WAAY,W,CAAiC,WAAD,WAA7D,YAA2F,CAAyDS,QAAM,cAAP,CAAiC,KAAC,Q,GAA0B,CAA8B,sBAAIH,EAAG,OAAI,WAA4I,YAAU,0B,MAAmBI,CAApB,gBAAqC,K,GAAwG,iCAAD,oB,MAAoB,C,QAAoB,WAA/C,GAA/D,CAAqIV,eAAD,GAAoBS,OAAM,wB,CAAYE,EAAG,mH,OAAC,SAAQ,C,IAAiB,EAAOL,K,CAA6B,uDAA9D,OAAkEA,cAAO,GAAgLL,UAAa,MAAQ,UAAT,UAArB,YAAoE,OAAkG,MAAK,CAA2HQ,KAAM,IAAmB,IAA1B,kBAAwC,+BAA6C,2JAA7C,aAAiDH,MAAO,OAAzyD,uBAEIM,2BAAJ,oEAEA,GAASC,OAAQD,gDAAjB,2C,mLCmGA,GACAE,OACAC,UACAC,WACAC,mBAAA,WAEAC,gBACAF,YACAC,aAIAE,KAZA,WAaA,OACAC,qBACAhB,UACAiB,aAIAC,SACAd,UADA,oEACAe,GADA,4FAEA,gBACAb,EAAAa,kBAEAA,EALA,yCAMAC,yEANA,gCAUAC,+CAVA,OAUAC,EAVA,OAWAF,0EACAG,uCAAAC,eAAAzB,UAZA,qDAcAqB,gDAdA,yBAgBA,gBAhBA,sIAoBAK,gBApBA,oEAoBAnB,GApBA,8FAqBA,2BArBA,kBAuBAe,0BAvBA,0DAyBAK,EAzBA,KA0BA,6BACAA,8BAEAN,6CA7BA,yBA+BA,0BA/BA,uIC3HwX,I,YCOpXO,EAAY,eACd,EACA,EACAnB,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E","file":"js/chunk-2d217689.a972c67e.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-xs-center\"},[_c('v-dialog',{attrs:{\"width\":\"500\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on }){return [_c('v-btn',_vm._g({staticClass:\"ma-0 pa-0\",staticStyle:{\"width\":\"100%\"},attrs:{\"depressed\":\"\"}},on),[_vm._v(\"\\n        Anexos\\n      \")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.addUpload}}),_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_vm._v(\"\\n        Anexos\\n        \"),_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.$refs.file.click()}}},[_vm._v(\"\\n          Novo arquivo\\n        \")])],1),_c('v-card-text',[(_vm.arquivos.length > 0)?_c('v-list',_vm._l((_vm.arquivos),function(arquivo){return _c('v-list-tile',{key:arquivo._id},[_c('v-list-tile-content',[_c('div',[(_vm.loadingDownload === arquivo._id)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"20\",\"color\":\"blue\"}}):_c('v-icon',{staticClass:\"mx-0\",attrs:{\"left\":\"\"},on:{\"click\":function($event){return _vm.downloadArquivo(arquivo)}}},[_vm._v(\"\\n                  download_for_offline\\n                \")]),_vm._v(\"\\n                \"+_vm._s(arquivo.nome)+\"\\n              \")],1)]),_c('v-list-tile-content',[_c('span',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\"}},[_vm._v(\"\\n                \"+_vm._s(_vm._f(\"bytes2human\")(arquivo.tamanho))+\"\\n              \")])])],1)}),1):_c('h5',[_vm._v(\"\\n          Não há anexos\\n        \")])],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"flat\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"\\n          Fechar\\n        \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"text-xs-center\">\n    <v-dialog\n      v-model=\"dialog\"\n      width=\"500\"\n    >\n      <template v-slot:activator=\"{ on }\">\n        <v-btn\n          depressed\n          style=\"width: 100%\"\n          v-on=\"on\"\n          class=\"ma-0 pa-0\"\n        >\n          Anexos\n        </v-btn>\n      </template>\n\n      <input\n        ref=\"file\"\n        type=\"file\"\n        style=\"display: none\"\n        @change=\"addUpload\"\n      >\n      \n      <v-card>\n        <v-card-title\n          class=\"headline grey lighten-2\"\n          primary-title\n        >\n          Anexos\n          <v-spacer />\n          <v-btn\n            :loading=\"loading\"\n            @click=\"$refs.file.click()\"\n          >\n            Novo arquivo\n          </v-btn>\n        </v-card-title>\n\n        <v-card-text>\n          <v-list\n            v-if=\"arquivos.length > 0\"\n          >\n            <v-list-tile\n              v-for=\"arquivo in arquivos\"\n              :key=\"arquivo._id\"\n            >\n              <v-list-tile-content>\n                <div>\n                  <v-progress-circular\n                    v-if=\"loadingDownload === arquivo._id\"\n                    indeterminate\n                    size=\"20\"\n                    color=\"blue\"\n                  />\n                  <v-icon\n                    v-else\n                    left\n                    class=\"mx-0\"\n                    @click=\"downloadArquivo(arquivo)\"\n                  >\n                    download_for_offline\n                  </v-icon>\n                  {{ arquivo.nome }}\n                </div>\n              </v-list-tile-content>\n              <v-list-tile-content>\n                <span\n                  style=\"width: 100%; text-align: right\"\n                >\n                  {{ arquivo.tamanho | bytes2human }}\n                </span>\n              </v-list-tile-content>\n            </v-list-tile>\n          </v-list>\n          <h5\n            v-else\n          >\n            Não há anexos\n          </h5>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            flat\n            @click=\"dialog = false\"\n          >\n            Fechar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\n  import API from '@/api/'\n  import { EventBus } from '@/event-bus.js';\n\n  export default {\n    props: {\n      arquivos: {\n        type: Array,\n        default: () => [],\n      },\n      idMovimentacao: {\n        type: String,\n        default: '',\n      },\n    },\n\n    data () {\n      return {\n        loadingDownload: null,\n        dialog: false,\n        loading: false,\n      }\n    },\n\n    methods: {\n      async addUpload (file) {\n        this.loading = true\n        const arquivo = file.target.files[0]\n\n        if (!file) {\n          return window.getApp.$emit(\"APP_GENERIC_WARNING\", 'Nenhum arquivo selecionado')\n        }\n        \n        try {\n          const movimentacao = await API.Upload.addUpload(arquivo, this.idMovimentacao)\n          window.getApp.$emit(\"APP_GENERIC_SUCCESS\", 'Arquivo enviado com sucesso!')\n          EventBus.$emit('atualizar-movimentacao', { key: 'arquivos', value: movimentacao })\n        } catch (err) {\n          window.getApp.$emit(\"APP_GENERIC_WARNING\", err)\n        } finally {\n          this.loading = false\n        }\n      },\n\n      async downloadArquivo (arquivo) {\n        this.loadingDownload = arquivo._id\n        try {\n          await API.Upload.download(arquivo)\n        } catch (err) {\n          let errorMsg = err\n          if (err.response.data.message) {\n            errorMsg = err.response.data.message\n          }\n          window.getApp.$emit(\"APP_GENERIC_WARNING\", errorMsg)\n        } finally {\n          this.loadingDownload = null\n        }\n      }\n    },\n  }\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnexoDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnexoDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnexoDialog.vue?vue&type=template&id=6a6dfcd2&\"\nimport script from \"./AnexoDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./AnexoDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}