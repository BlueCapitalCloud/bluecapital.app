{"version":3,"sources":["webpack:///./src/components/AnexoDialog.vue?c228","webpack:///src/components/AnexoDialog.vue","webpack:///./src/components/AnexoDialog.vue?efd9","webpack:///./src/components/AnexoDialog.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","ref","on","_g","staticStyle","_v","model","value","callback","$$v","dialog","expression","addUpload","loading","$event","$refs","file","click","arquivos","length","_l","arquivo","_id","loadingDownload","downloadArquivo","_s","nome","_f","tamanho","staticRenderFns","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VIcon","VList","VListTile","VListTileContent","VProgressCircular","VSpacer"],"mappings":"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","file":"js/chunk-2d217689.d67d1021.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-xs-center\"},[_c('v-dialog',{attrs:{\"width\":\"500\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"ma-0 pa-0\",staticStyle:{\"width\":\"100%\"},attrs:{\"depressed\":\"\"}},on),[_vm._v(\"\\n        Anexos\\n      \")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.addUpload}}),_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_vm._v(\"\\n        Anexos\\n        \"),_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.$refs.file.click()}}},[_vm._v(\"\\n          Novo arquivo\\n        \")])],1),_c('v-card-text',[(_vm.arquivos.length > 0)?_c('v-list',_vm._l((_vm.arquivos),function(arquivo){return _c('v-list-tile',{key:arquivo._id},[_c('v-list-tile-content',[_c('div',[(_vm.loadingDownload === arquivo._id)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"20\",\"color\":\"blue\"}}):_c('v-icon',{staticClass:\"mx-0\",attrs:{\"left\":\"\"},on:{\"click\":function($event){return _vm.downloadArquivo(arquivo)}}},[_vm._v(\"\\n                  download_for_offline\\n                \")]),_vm._v(\"\\n                \"+_vm._s(arquivo.nome)+\"\\n              \")],1)]),_c('v-list-tile-content',[_c('span',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\"}},[_vm._v(\"\\n                \"+_vm._s(_vm._f(\"bytes2human\")(arquivo.tamanho))+\"\\n              \")])])],1)}),1):_c('h5',[_vm._v(\"\\n          Não há anexos\\n        \")])],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"flat\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"\\n          Fechar\\n        \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"text-xs-center\">\n    <v-dialog\n      v-model=\"dialog\"\n      width=\"500\"\n    >\n      <template v-slot:activator=\"{ on }\">\n        <v-btn\n          depressed\n          style=\"width: 100%\"\n          v-on=\"on\"\n          class=\"ma-0 pa-0\"\n        >\n          Anexos\n        </v-btn>\n      </template>\n\n      <input\n        ref=\"file\"\n        type=\"file\"\n        style=\"display: none\"\n        @change=\"addUpload\"\n      >\n      \n      <v-card>\n        <v-card-title\n          class=\"headline grey lighten-2\"\n          primary-title\n        >\n          Anexos\n          <v-spacer />\n          <v-btn\n            :loading=\"loading\"\n            @click=\"$refs.file.click()\"\n          >\n            Novo arquivo\n          </v-btn>\n        </v-card-title>\n\n        <v-card-text>\n          <v-list\n            v-if=\"arquivos.length > 0\"\n          >\n            <v-list-tile\n              v-for=\"arquivo in arquivos\"\n              :key=\"arquivo._id\"\n            >\n              <v-list-tile-content>\n                <div>\n                  <v-progress-circular\n                    v-if=\"loadingDownload === arquivo._id\"\n                    indeterminate\n                    size=\"20\"\n                    color=\"blue\"\n                  />\n                  <v-icon\n                    v-else\n                    left\n                    class=\"mx-0\"\n                    @click=\"downloadArquivo(arquivo)\"\n                  >\n                    download_for_offline\n                  </v-icon>\n                  {{ arquivo.nome }}\n                </div>\n              </v-list-tile-content>\n              <v-list-tile-content>\n                <span\n                  style=\"width: 100%; text-align: right\"\n                >\n                  {{ arquivo.tamanho | bytes2human }}\n                </span>\n              </v-list-tile-content>\n            </v-list-tile>\n          </v-list>\n          <h5\n            v-else\n          >\n            Não há anexos\n          </h5>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            flat\n            @click=\"dialog = false\"\n          >\n            Fechar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\n  import API from '@/api/'\n  import { EventBus } from '@/event-bus.js';\n\n  export default {\n    props: {\n      arquivos: {\n        type: Array,\n        default: () => [],\n      },\n      idMovimentacao: {\n        type: String,\n        default: '',\n      },\n    },\n\n    data () {\n      return {\n        loadingDownload: null,\n        dialog: false,\n        loading: false,\n      }\n    },\n\n    methods: {\n      async addUpload (file) {\n        this.loading = true\n        const arquivo = file.target.files[0]\n\n        if (!file) {\n          return window.getApp.$emit(\"APP_GENERIC_WARNING\", 'Nenhum arquivo selecionado')\n        }\n        \n        try {\n          const movimentacao = await API.Upload.addUpload(arquivo, this.idMovimentacao)\n          window.getApp.$emit(\"APP_GENERIC_SUCCESS\", 'Arquivo enviado com sucesso!')\n          EventBus.$emit('atualizar-movimentacao', { key: 'arquivos', value: movimentacao })\n        } catch (err) {\n          window.getApp.$emit(\"APP_GENERIC_WARNING\", err)\n        } finally {\n          this.loading = false\n        }\n      },\n\n      async downloadArquivo (arquivo) {\n        this.loadingDownload = arquivo._id\n        try {\n          await API.Upload.download(arquivo)\n        } catch (err) {\n          let errorMsg = err\n          if (err.response.data.message) {\n            errorMsg = err.response.data.message\n          }\n          window.getApp.$emit(\"APP_GENERIC_WARNING\", errorMsg)\n        } finally {\n          this.loadingDownload = null\n        }\n      }\n    },\n  }\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnexoDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnexoDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnexoDialog.vue?vue&type=template&id=6a6dfcd2&\"\nimport script from \"./AnexoDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./AnexoDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListTile } from 'vuetify/lib/components/VList';\nimport { VListTileContent } from 'vuetify/lib/components/VList';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VIcon,VList,VListTile,VListTileContent,VProgressCircular,VSpacer})\n"],"sourceRoot":""}